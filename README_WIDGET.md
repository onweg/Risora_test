# Инструкция по добавлению виджета

## Шаг 1: Создание Widget Extension в Xcode

1. Откройте проект в Xcode
2. File → New → Target...
3. Выберите **Widget Extension**
4. Назовите его `RisoraWidget`
5. **ВАЖНО:** Убедитесь что "Include Configuration Intent" **НЕ** отмечен (мы используем StaticConfiguration)
6. Нажмите Finish
7. Когда Xcode спросит активировать схему - нажмите "Activate"

## Шаг 2: Настройка App Group

1. Выберите основной таргет приложения (test2 или Risora)
2. Перейдите на вкладку **Signing & Capabilities**
3. Нажмите **+ Capability**
4. Добавьте **App Groups**
5. Нажмите **+** и создайте группу: `group.com.risora.widget`
6. Повторите то же самое для таргета **RisoraWidget**

## Шаг 3: Копирование файлов

Скопируйте следующие файлы в Widget Extension:

1. **GoalWidget.swift** → добавьте в проект (убедитесь что файл добавлен в таргет RisoraWidget)
2. **WidgetDataService.swift** → добавьте в проект (нужен в ОБОИХ таргетах: основном и виджете)
3. **RisoraWidgetBundle.swift** → добавьте в проект (в таргет RisoraWidget)

## Шаг 4: Настройка Info.plist виджета

Откройте `Info.plist` виджета и добавьте:

```xml
<key>NSExtension</key>
<dict>
    <key>NSExtensionPointIdentifier</key>
    <string>com.apple.widgetkit-extension</string>
</dict>
```

## Шаг 5: Обновление WidgetDataService в основном приложении

Файл `WidgetDataService.swift` уже создан в основном приложении в папке `test2/Presentation/Services/`.

**Убедитесь что этот файл добавлен в основной таргет приложения.**

## Шаг 6: Сборка и запуск

1. Выберите схему **RisoraWidget** (не основное приложение)
2. Запустите на симуляторе или устройстве
3. iOS покажет меню выбора виджета - выберите размер **Small** (2x2)
4. Виджет появится на экране

## Шаг 7: Добавление виджета на главный экран

1. Долго нажмите на пустое место на главном экране
2. Нажмите **+** в левом верхнем углу
3. Найдите "Risora" или "Цель"
4. Выберите размер **Small**
5. Нажмите "Add Widget"
6. Перетащите виджет куда нужно

## Как это работает

- Виджет показывает одну из ваших целей
- Цель автоматически меняется раз в 3 дня
- Виджет показывает: название цели, мотивацию и список связанных привычек (до 3)
- Данные синхронизируются через App Group между приложением и виджетом

## Тестирование

После добавления виджета:
1. Откройте приложение и создайте/обновите цели
2. Виджет обновится автоматически
3. Или перезагрузите виджет: долго нажмите на виджет → "Reload Widget"
